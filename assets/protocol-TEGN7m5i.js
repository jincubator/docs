import{f as a,j as s}from"./index-CsmQaVFF.js";const r={title:"Protocol",description:"undefined"};function n(i){const e={a:"a",blockquote:"blockquote",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...a(),...i.components};return s.jsxs(s.Fragment,{children:[s.jsx(e.header,{children:s.jsxs(e.h1,{id:"protocol",children:["Protocol",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#protocol",children:s.jsx(e.div,{"data-autolink-icon":!0})})]})}),`
`,s.jsxs(e.h2,{id:"overview",children:["Overview",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#overview",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(e.p,{children:"The Protocol is part of an opinionated architecture for an intent based solving protocol which facilitates single and multichain solving of intents. Intents can be solved on a single chain without provisioning up front capital as we arbiters can confirm mandates have been met by solvers at execution time, thus solvers may use the swappers locked funds for execution. It does this by introducing a SolverPayload which can be executed by the Arbiter to ensure the EIP-712 signed mandate is met."}),`
`,s.jsx(e.p,{children:"Key Goals for this design include"}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsx(e.li,{children:"Intent Based Architecture to improve execution"}),`
`,s.jsx(e.li,{children:"Ability for Solvers to execute fills without needing to provide upfront capital"}),`
`]}),`
`,s.jsx(e.p,{children:"The protocol is inspired by or leverages the following key components"}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:[s.jsx(e.a,{href:"https://github.com/propeller-heads/tycho-execution",children:"Tycho Execution"}),": Is leveraged by Arbiters and solvers for executing most efficient routes."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.a,{href:"https://github.com/uniswap/the-compact",children:"Uniswap the-compact"}),": The foundation of our resource locking mechanism"]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.a,{href:"https://github.com/uniswap/tribunal",children:"Uniswap Tribunal"}),": Mandates and EIP-712 signing are heavily utilized throughout the protocol"]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.a,{href:"https://github.com/uniswap/v4-core",children:"Uniswap v4"}),": We leverage V4 hooks for IntentSwap Execution on Uniswap V4."]}),`
`]}),`
`,s.jsxs(e.blockquote,{children:[`
`,s.jsxs(e.p,{children:[`For a technical overview of this repository automatically generated by DeepWiki please
`,s.jsx(e.a,{href:"https://deepwiki.com/jincubator/protocol",children:s.jsx(e.img,{src:"https://deepwiki.com/badge.svg",alt:"Ask DeepWiki"})})]}),`
`]}),`
`,s.jsxs(e.h2,{id:"mandate-functionality",children:["Mandate Functionality",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#mandate-functionality",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.blockquote,{children:[`
`,s.jsxs(e.p,{children:[":information_source: _The following section was inspired by the ",s.jsx(e.a,{href:"https://github.com/uniswap/tribunal",children:":unicorn: Tribunal"})," and updated to support monochain swaps which allow for solvers to execute intents with the swappers funds."]}),`
`]}),`
`,s.jsx(e.p,{children:'To settle a swap, the filler submits a "fill" request to the Arbiter contract. This consists of four core components:'}),`
`,s.jsxs(e.ol,{children:[`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Claim"}),": Contains the chain ID of a Compact, its parameters, and its signatures."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Mandate"}),": Specifies settlement conditions and amount derivation parameters specified by the sponsor."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"SolverPayload"}),": Specifies the transactions to execute to solve the intent"]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Claimant"}),": Specifies the account that will receive the claimed tokens."]}),`
`]}),`
`,s.jsxs(e.blockquote,{children:[`
`,s.jsxs(e.p,{children:["Note for cross-chain message protocols integrating with Tribunal: inherit the ",s.jsx(e.code,{children:"Arbiter"})," contract and override the ",s.jsx(e.code,{children:"_processDirective"})," and ",s.jsx(e.code,{children:"_quoteDirective"}),' functions to implement the relevant directive processing logic for passing a message to the arbiter on the claim chain (or ensure that the necessary state is updated to allow for the arbiter to "pull" the message themselves). An ERC7683-compatible implementation is provided in ',s.jsx(e.code,{children:"ERC7683Arbiter.sol"}),`.
⚠️ Note: for cross-chain intents SolverPayloads can be executed on the destination chain, but the solver must provide their own funds and provisioning of the swapper tokens to the solver will be handled by the Settlement Service.`]}),`
`]}),`
`,s.jsxs(e.h3,{id:"core-components",children:["Core Components",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#core-components",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.h4,{id:"claim-structure",children:["Claim Structure",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#claim-structure",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Claim"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" chainId;          "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Claim processing chain ID"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    Compact compact;          "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// The compact parameters"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    bytes"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" sponsorSignature;   "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Authorization from the sponsor"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    bytes"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" allocatorSignature; "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Authorization from the allocator"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsxs(e.h4,{id:"compact-structure",children:["Compact Structure",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#compact-structure",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Compact"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" arbiter;          "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// The account tasked with verifying and submitting the claim"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" sponsor;          "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// The account to source the tokens from"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" nonce;            "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// A parameter to enforce replay protection, scoped to allocator"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" expires;          "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// The time at which the claim expires"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" id;               "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// The token ID of the ERC6909 token to allocate"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" amount;           "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// The amount of ERC6909 tokens to allocate"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsxs(e.h4,{id:"solver-payload-structure",children:["Solver Payload Structure",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#solver-payload-structure",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/**"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@notice"}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" Defines a single contract call to be executed"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@param"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" to"}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" The target contract address"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@param"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" data"}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" The encoded function call data"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@param"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" value"}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" Amount of ETH to send"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" */"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Call"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" to; "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// The target contract address"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    bytes"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" data; "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// The encoded function call data"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" value; "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"//Amount of ETH to send"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" SolverPayload"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    Call[] calls; "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"//Array of contract calls to execute in sequence"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsxs(e.h4,{id:"mandate-structure",children:["Mandate Structure",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#mandate-structure",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Mandate"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" recipient;           "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Recipient of filled tokens"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" expires;             "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Mandate expiration timestamp"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" token;               "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Fill token (address(0) for native)"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" minimumAmount;       "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Minimum fill amount"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" baselinePriorityFee; "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Base fee threshold where scaling kicks in"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" scalingFactor;       "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Fee scaling multiplier (1e18 baseline)"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    bytes32"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" salt;                "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Preimage resistance parameter"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsxs(e.h3,{id:"process-flow",children:["Process Flow",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#process-flow",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.ol,{children:[`
`,s.jsxs(e.li,{children:["Fillers initiate by calling ",s.jsx(e.code,{children:"fill(Claim calldata claim, Mandate calldata mandate, SolverPayload calldata solverPayload address claimant)"})," and providing any msg.value required for the settlement to pay to process the solution."]}),`
`,s.jsxs(e.li,{children:["Arbiter verifies that the mandate has not expired by checking the mandate's ",s.jsx(e.code,{children:"expires"})," timestamp"]}),`
`,s.jsxs(e.li,{children:["Computation phase:",`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:["Derives ",s.jsx(e.code,{children:"mandateHash"})," using an EIP712 typehash for the mandate, destination chainId, tribunal address, and mandate data"]}),`
`,s.jsxs(e.li,{children:["Derives ",s.jsx(e.code,{children:"claimHash"})," using an EIP712 typehash for the compact with the mandate as a witness and the compact data including the ",s.jsx(e.code,{children:"mandateHash"})]}),`
`,s.jsxs(e.li,{children:["Ensures that the ",s.jsx(e.code,{children:"claimHash"})," has not already been used and marks it as filled"]}),`
`,s.jsxs(e.li,{children:["Calculates ",s.jsx(e.code,{children:"fillAmount"})," and ",s.jsx(e.code,{children:"claimAmount"})," based on:",`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:["Compact ",s.jsx(e.code,{children:"amount"})]}),`
`,s.jsxs(e.li,{children:["Mandate parameters (",s.jsx(e.code,{children:"minimumAmount"}),", ",s.jsx(e.code,{children:"baselinePriorityFee"}),", ",s.jsx(e.code,{children:"scalingFactor"}),")"]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.code,{children:"tx.gasprice"})," and ",s.jsx(e.code,{children:"block.basefee"})]}),`
`,s.jsxs(e.li,{children:["NOTE: ",s.jsx(e.code,{children:"scalingFactor"})," will result in an increased ",s.jsx(e.code,{children:"fillAmount"})," if ",s.jsx(e.code,{children:"> 1e18"})," or a decreased ",s.jsx(e.code,{children:"claimAmount"})," if ",s.jsx(e.code,{children:"< 1e18"})]}),`
`,s.jsxs(e.li,{children:["NOTE: ",s.jsx(e.code,{children:"scalingFactor"})," is combined with ",s.jsx(e.code,{children:"tx.gasprice - (block.basefee + baselinePriorityFee)"})," (or 0 if it would otherwise be negative) before being applied to the amount"]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`,s.jsxs(e.li,{children:["Execution phase:",`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:["Executes: The Solver Payload using the funds locked in the-compact and ensures that this results in output funds (tokens or ETH) >= that specified in the mandate. ",s.jsx(e.strong,{children:"IF NOT REVERT"})]}),`
`,s.jsxs(e.li,{children:["Transfers ",s.jsx(e.code,{children:"fillAmount"})," of ",s.jsx(e.code,{children:"token"})," to mandate ",s.jsx(e.code,{children:"recipient"})]}),`
`,s.jsxs(e.li,{children:["Transfers Compact ",s.jsx(e.code,{children:"amount"})," of ",s.jsx(e.code,{children:"token"})," to the filler."]}),`
`,s.jsxs(e.li,{children:["Processes directive via ",s.jsx(e.code,{children:"_processDirective(chainId, compact, sponsorSignature, allocatorSignature, mandateHash, claimant, claimAmount)"})]}),`
`]}),`
`]}),`
`]}),`
`,s.jsx(e.p,{children:"There are also a few view functions:"}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:[s.jsx(e.code,{children:"quote(Claim calldata claim, Mandate calldata mandate, address claimant)"}),' will suggest a dispensation amount (function of gas on claim chain + any additional "protocol overhead" if using push-based cross-chain messaging)']}),`
`,s.jsxs(e.li,{children:[s.jsx(e.code,{children:"filled(bytes32 claimHash)"})," will check if a given claim hash has already been filled (used)"]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.code,{children:"getCompactWitnessDetails()"})," will return the Mandate witness typestring and that correlates token + amount arguments (so frontends can show context about the token and use decimal inputs)"]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.code,{children:"deriveMandateHash(Mandate calldata mandate)"})," will return the EIP712 typehash for the mandate"]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.code,{children:"deriveClaimHash(Compact calldata compact, bytes32 mandateHash)"})," will return the unique claim hash for a compact and mandate combination"]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.code,{children:"deriveAmounts(uint256 maximumAmount, uint256 minimumAmount, uint256 baselinePriorityFee, uint256 scalingFactor)"})," will return the fill and claim amounts based on the parameters; the base fee and priority fee will be applied to the amount and so should be tuned in the call appropriately"]}),`
`]}),`
`,s.jsxs(e.h4,{id:"mandate-eip-712-typehash",children:["Mandate EIP-712 Typehash",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#mandate-eip-712-typehash",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["This is what swappers will see as their witness data when signing a ",s.jsx(e.code,{children:"Compact"}),":"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"struct"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Mandate"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" chainId;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" tribunal;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" recipient;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" expires;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" token;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" minimumAmount;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" baselinePriorityFee;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" scalingFactor;"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    bytes32"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" salt;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsxs(e.h3,{id:"erc7683-integration",children:["ERC7683 Integration",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#erc7683-integration",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["The ",s.jsx(e.code,{children:"ERC7683Arbiter"})," contract implements the ",s.jsx(e.code,{children:"IDestinationSettler"})," interface from ERC7683, allowing for standardized cross-chain settlement:"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"interface"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" IDestinationSettler"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" fill"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes32"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" orderId"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" originData"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" fillerData"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsx(e.p,{children:"This implementation allows the Tribunal to be used with any ERC7683-compatible cross-chain messaging system."})]})}function c(i={}){const{wrapper:e}={...a(),...i.components};return e?s.jsx(e,{...i,children:s.jsx(n,{...i})}):n(i)}export{c as default,r as frontmatter};
