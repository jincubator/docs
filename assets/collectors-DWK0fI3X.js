import{f as r,j as e}from"./index-BZW_0xgh.js";const a={title:"Collectors",description:"undefined"};function n(i){const s={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...r(),...i.components};return e.jsxs(e.Fragment,{children:[e.jsx(s.header,{children:e.jsxs(s.h1,{id:"collectors",children:["Collectors",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#collectors",children:e.jsx(s.div,{"data-autolink-icon":!0})})]})}),`
`,e.jsxs(s.h2,{id:"overview",children:["Overview",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#overview",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"Collectors form the bedrock of the solving infrastructure by continuously streaming on-chain data from multiple protocols. The system leverages real-time blockchain indexing to capture state changes across DEX protocols, enabling immediate route evaluation and arbitrage detection."}),`
`,e.jsxs(s.h2,{id:"using-our-solution",children:["Using our Solution",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#using-our-solution",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"Our collectors enable solvers and market makers to:"}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Real-time Data Streaming"}),": Monitor blockchain state changes across multiple protocols in real-time"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Multi-protocol Support"}),": Index data from Uniswap V2/V3/V4, Balancer, Curve, SushiSwap, and more"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"TVL-based Filtering"}),": Focus on pools with significant liquidity to optimize processing"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"State Change Triggers"}),": Automatically trigger route evaluations when pool states change"]}),`
`]}),`
`,e.jsxs(s.h2,{id:"solution-overview",children:["Solution Overview",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#solution-overview",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["The collection architecture is built on ",e.jsx(s.a,{href:"https://docs.propellerheads.xyz/tycho/for-solvers/indexer",children:"Tycho Indexer"})," using ",e.jsx(s.a,{href:"https://docs.substreams.dev/",children:"substreams"})," technology. This provides real-time state updates for multiple protocols filtered by TVL values."]}),`
`,e.jsxs(s.h3,{id:"key-components",children:["Key Components",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#key-components",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.h4,{id:"liquidity-mapping-collector",children:["Liquidity Mapping Collector",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#liquidity-mapping-collector",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"The liquidity mapping collector system provides comprehensive chain indexing capabilities through integration with Tycho protocol streams, enabling real-time monitoring of blockchain state changes across multiple supported chains."}),`
`,e.jsxs(s.h4,{id:"streaming-engine-collector",children:["Streaming Engine Collector",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#streaming-engine-collector",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"The MinimalStreamingEngine serves as the central orchestrator for the entire arbitrage system, coordinating real-time data ingestion, route discovery, profitability evaluation, and transaction execution."}),`
`,e.jsxs(s.h3,{id:"architecture",children:["Architecture",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#architecture",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"The collectors follow a modular design with:"}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Data Collection"}),": Real-time streaming from blockchain via WebSocket connections"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"State Processing"}),": Live protocol state updates with incremental changes"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Graph Building"}),": Dynamic graph construction as new pools are discovered"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Route Discovery"}),": Automatic route calculation for new trading pairs"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Performance Optimization"}),": Microsecond-level processing with memory caching"]}),`
`]}),`
`,e.jsxs(s.h3,{id:"persistence",children:["Persistence",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#persistence",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["The system uses ",e.jsx(s.strong,{children:"RocksDB"})," as its primary database engine with a column family architecture optimized for high-performance operations:"]}),`
`,e.jsxs(s.table,{children:[e.jsx(s.thead,{children:e.jsxs(s.tr,{children:[e.jsx(s.th,{children:"Column Family"}),e.jsx(s.th,{children:"Purpose"}),e.jsx(s.th,{children:"Key Format"}),e.jsx(s.th,{children:"Value Format"})]})}),e.jsxs(s.tbody,{children:[e.jsxs(s.tr,{children:[e.jsx(s.td,{children:e.jsx(s.code,{children:"tokens"})}),e.jsx(s.td,{children:"Token metadata"}),e.jsx(s.td,{children:e.jsx(s.code,{children:"token:<address>"})}),e.jsxs(s.td,{children:["Serialized ",e.jsx(s.code,{children:"Token"})," struct"]})]}),e.jsxs(s.tr,{children:[e.jsx(s.td,{children:e.jsx(s.code,{children:"graph"})}),e.jsx(s.td,{children:"Graph edges"}),e.jsx(s.td,{children:e.jsx(s.code,{children:"graph:<token_address>"})}),e.jsxs(s.td,{children:["Serialized ",e.jsx(s.code,{children:"Vec<CompactEdge>"})]})]}),e.jsxs(s.tr,{children:[e.jsx(s.td,{children:e.jsx(s.code,{children:"routes"})}),e.jsx(s.td,{children:"Calculated routes"}),e.jsx(s.td,{children:e.jsx(s.code,{children:"route:<route_id>"})}),e.jsxs(s.td,{children:["Serialized ",e.jsx(s.code,{children:"Route"})," struct"]})]}),e.jsxs(s.tr,{children:[e.jsx(s.td,{children:e.jsx(s.code,{children:"signals"})}),e.jsx(s.td,{children:"Route signals"}),e.jsx(s.td,{children:e.jsx(s.code,{children:"signal:<signal_id>"})}),e.jsxs(s.td,{children:["Serialized ",e.jsx(s.code,{children:"RouteSignal"})," struct"]})]})]})]}),`
`,e.jsxs(s.p,{children:[e.jsx(s.strong,{children:"Performance Optimizations"}),":"]}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Write Batching"}),": 100 operations per batch with 100ms flush interval"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Asynchronous Writes"}),": Non-blocking write operations via dedicated writer thread"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Memory Caching"}),": In-memory route storage with O(1) pool index lookup"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Incremental Updates"}),": Only recalculates affected routes on state changes"]}),`
`]}),`
`,e.jsxs(s.h2,{id:"technical-reference",children:["Technical Reference",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#technical-reference",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.h3,{id:"stream-message-processing",children:["Stream Message Processing",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#stream-message-processing",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"async"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" fn"}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" process_stream_message"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"&mut"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" self"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", message"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" StreamMessage"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"->"}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Result"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"<()> {"})]}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Update pool states"})}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    self"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"."}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"update_pool_states"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"&"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"message)"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:".await?"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,e.jsx(s.span,{className:"line","data-empty-line":!0,children:" "}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Check for new trading pairs"})}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    if"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" self"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"."}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"has_new_pairs"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"&"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"message) {"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        self"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"."}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"process_new_pools"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"&"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"message)"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:".await?"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,e.jsx(s.span,{className:"line","data-empty-line":!0,children:" "}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Re-evaluate existing routes if state changed"})}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    if"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" self"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"."}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"has_state_updates"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"&"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"message) {"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        self"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"."}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"re_evaluate_routes"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"()"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:".await?"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,e.jsxs(s.h3,{id:"state-update-flow",children:["State Update Flow",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#state-update-flow",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"The streaming system processes real-time blockchain data through a sophisticated pipeline:"}),`
`,e.jsxs(s.ol,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"State Updates"}),": Pool states updated in real-time"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Graph Updates"}),": Trading graph rebuilt incrementally"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Route Calculation"}),": New routes calculated for affected pools"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Route Evaluation"}),": Routes evaluated for profitability"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Execution"}),": Profitable routes executed automatically"]}),`
`]}),`
`,e.jsxs(s.h3,{id:"performance-metrics",children:["Performance Metrics",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#performance-metrics",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"The collectors achieve high-performance data processing:"}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Route Evaluation"}),": Over 1,000 routes per second"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Average Processing Time"}),": 424 microseconds per route"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Memory Usage"}),": ~657 MB for full operation"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Database Operations"}),": High-throughput with batched writes"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Success Rate"}),": 100% execution success rate in production testing"]}),`
`]}),`
`,e.jsxs(s.h3,{id:"configuration",children:["Configuration",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#configuration",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"Key configuration parameters for optimal performance:"}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"TVL Filtering"}),": Minimum TVL thresholds (1-50 ETH depending on chain)"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Protocol Selection"}),": 2-7 protocols per chain depending on liquidity"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Batch Processing"}),": Configurable batch sizes for write operations"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Memory Management"}),": Adjustable cache sizes and flush intervals"]}),`
`]})]})}function t(i={}){const{wrapper:s}={...r(),...i.components};return s?e.jsx(s,{...i,children:e.jsx(n,{...i})}):n(i)}export{t as default,a as frontmatter};
